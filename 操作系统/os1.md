> 计算机操作系统 
>
> 教材《计算机操作系统（第四版）》 汤小丹等
>
> PPT 四川大学 杜中军老师

# 一 操作系统引论

要求

熟悉操作系统作用和定义，了解一般操作系统的历史

了解二类计算机硬件系统结构，熟悉现代操作系统的硬件基础——通道和中断`

熟悉掌握多道程序设计技术的概念，掌握批处理系统、分时系统及实时系统三种操作系统基本类型，了解微机操作系统、网络操作系统和分布式操作系统

掌握操作系统并发性、共享性、虚拟性和异步性等特征，了解现代操作系统特征，熟悉操作系统功能

## 1.1 操作系统的作用、目标

### 1.1.1 操作系统作用

操作系统是系统软件——从计算机系统组成观点

​       计算机系统组成

```
软件：
应用软件
系统软件（操作系统、语言处理系统和常见的例行服务程序）

硬件：   
输入/输出（I/O）设备
存储器
处理器
```



操作系统是资源管理者——从资源管理观点，用于控制和管理计算机系统的硬件和软件资源

​       

```
计算机系统资源：
软件资源：信息（数据和程序）
硬件资源：I/O设备、存储器、处理器

操作系统管理：文件系统、设备管理、存储器管理、处理器（进程）管理
```

操作系统是扩充裸机的第一层系统软件——从软件分层、扩允机器的观点

操作系统是用户与裸机之间的接口

 

操作系统定义：操作系统是一组控制和管理计算机系统的硬件和软件资源、合理地组织计算机工作流程以及方便用户的程序集合

 

### 1.1.2 操作系统目标

有效性：提高系统资源的利用率和吞吐量

方便性：便于用户使用

可扩充性：便于增加新功能和改进老功能

开放性

 

## 1.2 操作系统的发展历史

### 1.2.1 推动操作系统发展的主要动力

提高资源利用率和系统性能

方便用户

器件的发展

计算机体系结构的发展

### 1.2.2 手工操作

工作方式：

用户：既是程序员也是操作员

编程语言：机器语言

输入输出：纸带或卡片

工作特点：

```
用户独占全机：资源利用率低
CPU等待用户：CPU利用率低
每一用户都要自行编写涉及硬件的源代码
```

主要矛盾：低效率

提高效率途径：专门的操作员、批处理

### 1.2.3 单道批处理系统

根据是否支持联机输出分为：联机批处理和脱机批处理

 

联机批处理：

工作方式：

用户：分工明确，设计人员、生产人员、操作人员、程序人员、维护人员等

编程语言：汇编语言或高级语言

作业构成：程序、程序使用的数据以及作业控制卡或作业说明书。

作业控制命令由监督程序(monitor)来执行

工作特点：

```
CPU等待用户：CPU利用率低
```

脱机批处理：

作业控制命令由监督程序(monitor)来执行

利用卫星机完成输入输出工作，主机完成计算。主机和卫星机可并行工作。改善主机CPU和I/O设备的使用效率，提高吞吐量

批处理系统优点：系统吞吐量大，资源利用率高

缺点：作业周转时间长，用户无法实现对作业的控制   

```
作业周转时间：作业从提交到完成所需的时间，与作业大小和计算机性能有关、
作业周转时间=作业等待时间+作业运行时间
```

 

### 1.2.4 执行系统阶段

通道技术和中断技术，使监督程序在负责作业运行的同时提供I/O控制功能，监督程序发展成为执行系统。

执行系统构成：I/O系统（I/O中断程序和I/O控制服务程序），处理程序，管理程序。

系统程序模块化、作业控制语言出现。

主机与通道可并行

 

### 1.2.5 多道批处理系统

运行特征：

多道：内存中同时存放几个作业

宏观上并行运行：都处于运行状态但都未运行完

微观上串行运行：各作业交替使用CPU

当前运行的作业需I/O处理时，CPU转而执行另一个作业，直到另一个作业需I/O处理

优点：资源利用率高，作业吞吐量大

缺点：用户交互性差、作业平均周转时间长

 

### 1.2.6 分时系统

分时：多个用户分享使用同一台计算机。多个程序分时共享硬件和软件资源

出让CPU：

​       抢先式：OS强迫出让CPU

​       非抢先式：程序主动出让CPU

### 1.2.7 实时系统

响应时间短、在一定范围内、系统可靠性高

目前的操作系统，通常具有分时、实时、批处理功能，又称作通用操作系统。

### 1.2.8 操作系统进一步发展

第三代（60s-70s中）多模式系统

第四代（70s中-）网络操作系统、分布式操作系统、并行操作系统

 

## 1.4 操作系统基本类型

按支持用户数划分：

​       单用户系统：MS-DOS

​       多用户系统：UNIX

按支持的任务数划分：

​       单任务系统/单道系统：MS-DOS

​       多任务系统/多道系统：UNIX、WINDOWS

按功能和特点划分：

​       微机操作系统：配置在OS上的操作系统

​       批处理系统

```
多道程序设计技术：在计算机内存（需要大内存）同时存放几道相互独立的程序，宏观上并行，微观上串行
```

分时系统：在一个主机上连接多个终端，允许许多用户通过终端以交互方式使用计算机，共享主机中的资源

​       分时系统的特征：

```
多路性：允许在一个主机上同时连接多台联机终端
独立性：用户之间彼此独立操作
交互性：用户可通过终端与系统进行广泛的人机对话，请求系统提供多方面服务
及时性：用户的请求在很短时间内获得相应
```

​       分时系统的重要指标——响应时间

```
用户发生终端命令到系统作出响应的时间间隔，主要是根据用户所能接受的等待时间确定的。假设分时系统中用户数为n，每个用户的运行时间片为q，则系统响应时间T=q*n（T分为对换时间和真正处理时间两部分）
```

​       实时系统：       

```
快速的响应时间、有限的交互能力、高可靠性
实时系统与批处理系统、分时系统之间的区别：
专用系统：实时系统通常为专用系统，批处理系统与分时系统通常是通用系统
实时控制：实时系统实时性强
高可靠性
事件驱动和队列驱动
可与通用系统结合成通用实时系统
```

​       网络操作系统

​       分布式操作系统

​              分布式操作系统与网络操作系统的区别：

```
分布性：网络操作系统虽有分布处理的功能，但是其控制功能大多集中在某个主机或服务器上，分布式系统的处理分布是资源、功能、任务和控制都是分布的
透明性：分布式OS通常很好地隐藏系统内部的实现细节
统一性：分布式系统要求一个统一的操作系统
健壮性：分布式系统具有较好的可用性和可靠性
```

​       并行操作系统/多处理操作系统：提高计算机系统性能和可靠性

​              特点：

​              增加系统的吞吐量

​              提高系统可靠性

​       

## 1.5 操作系统特征和功能

### 1.5.1 操作系统特征

并发性：两个或多个时间在同一时间间隔内发生（区别并行性：两个或多个事件在同一时刻发生）

共享性：系统中的所有资源不再为一个程序所独占，而是供同时存在于系统中的多道程序所共同使用，有互斥共享和同时共享两种不同的共享方式

虚拟性：通过某种技术把一个物理实体变成逻辑上的对应物。

异步性和不确定性

 

### 1.5.2 现代操作系统特征

微内核结构：只把OS少数基本的功能分配给内核

多线程：执行应用的进程被分为多个能并行运行的线程

对称多处理机

```
非对称式多处理：主处理器只有一个，运行OS；从处理器有多个执行应用程序或I/O处理，负载不均，可靠性不够高，不易移植
对称式多处理：OS交替在各个处理器上执行，任务负载均衡，性能调节容易
```

分布式操作系统

面向对象设计

 

### 1.5.3 操作系统功能

处理机（进程）管理：对处理机进行分配并对其运行进行有效的控制和管理

存储器的管理：为多道程序的运行提供良好的环境，方便用户使用存储器，提高存储器的利用率以及从逻辑上扩充内存

I/O设备管理

信息管理（文件系统管理）

用户接口

 

## 1.6 典型例题：

```
（97年高级程序员试题2）在有一台处理机CPU和两台输入输出设备IO1和IO2，且能够实现抢先式多任务并行工作的多道程序环境内，投入运行优行级由高到低的P１、P2、P3 三个作业。它们使用设备的先后顺序和占用设备时间分别是：

作业P1:    IO2(30ms)、CPU(10ms)、IO1(30ms)、CPU(10ms)

作业P2:    IO1(20ms)、CPU(20ms)、IO2(40ms)

作业P3:    CPU(30ms)、IO1(20ms)

在控制程序介入时间可以忽略不计的假设下，作业P1、P2、P3 从投入到完成所用的时间分别是多少？三个作业从投入运行到全部完成，CPU、IO1和IO2的利用率分别是多少？

假设在系统中仅有这三个作业投入运行，各设备的利用率指该设备的使用时间同作业进程组全部完成所占用最长时间的比率
```

```
答案：P1：80ms，P2：90ms，P3：90ms，CPU：78%（70/90），IO1：78%，IO2：78%

解析：按优先级，高优先级要使用CPU时低优先级即使正在使用也需出让
```

